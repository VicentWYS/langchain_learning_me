# lambda_examples.py
# 演示 Python 中 lambda 表达式的常见使用方式
# 每个示例都附带运行结果说明

# ------------------------------------------------------------
# 1. 最基础的 lambda：代替简单函数
# ------------------------------------------------------------


# 普通函数写法
def add(x, y):
    return x + y


# lambda 写法
add_lambda = lambda x, y: x + y

print(add(3, 5))
print(add_lambda(3, 5))
# 运行结果：
# 8
# 8


# ------------------------------------------------------------
# 2. lambda 作为参数传给函数（非常常见）
# ------------------------------------------------------------

numbers = [1, 2, 3, 4, 5]

# 使用 lambda 对每个元素平方
squared = list(map(lambda x: x**2, numbers))
print(squared)
# 运行结果：
# [1, 4, 9, 16, 25]


# ------------------------------------------------------------
# 3. lambda 配合 filter 使用（筛选）
# ------------------------------------------------------------

# 过滤出偶数
evens = list(filter(lambda x: x % 2 == 0, numbers))
print(evens)
# 运行结果：
# [2, 4]


# ------------------------------------------------------------
# 4. lambda 配合 sorted 使用（非常重要！！！）
# ------------------------------------------------------------

students = [
    {"name": "Tom", "score": 80},
    {"name": "Jerry", "score": 95},
    {"name": "Bob", "score": 70},
]

# 按照 score 排序
sorted_students = sorted(students, key=lambda s: s["score"])
print(sorted_students)
# 运行结果：
# [{'name': 'Bob', 'score': 70},
#  {'name': 'Tom', 'score': 80},
#  {'name': 'Jerry', 'score': 95}]


# ------------------------------------------------------------
# 5. lambda 用在列表推导式中
# ------------------------------------------------------------

# 虽然不常见，但可以这样用
func = lambda x: x * 10
result = [func(i) for i in range(5)]
print(result)
# 运行结果：
# [0, 10, 20, 30, 40]


# ------------------------------------------------------------
# 6. lambda 创建简单逻辑判断
# ------------------------------------------------------------

is_even = lambda x: "偶数" if x % 2 == 0 else "奇数"
print(is_even(7))
print(is_even(8))
# 运行结果：
# 奇数
# 偶数


# ------------------------------------------------------------
# 7. lambda 作为返回值（函数式编程思想）
# ------------------------------------------------------------


def make_multiplier(n):
    return lambda x: x * n


double = make_multiplier(2)
triple = make_multiplier(3)

print(double(5))
print(triple(5))
# 运行结果：
# 10
# 15


# ------------------------------------------------------------
# 8. 多条件排序（非常实战）
# ------------------------------------------------------------

data = [("Tom", 90), ("Tom", 80), ("Jerry", 85), ("Bob", 95)]

# 先按名字排序，再按分数排序
sorted_data = sorted(data, key=lambda x: (x[0], x[1]))
print(sorted_data)
# 运行结果：
# [('Bob', 95),
#  ('Jerry', 85),
#  ('Tom', 80),
#  ('Tom', 90)]


# ------------------------------------------------------------
# 9. lambda + reduce（需要导入 functools）
# ------------------------------------------------------------

from functools import reduce

# 求和
total = reduce(lambda x, y: x + y, numbers)
print(total)
# 运行结果：
# 15


# ------------------------------------------------------------
# 10. lambda 的限制：只能写一行表达式，不能写多行语句
# ------------------------------------------------------------

# 错误示例（不能这样写）：
# lambda x:
#     print(x)
#     return x

# 正确示例：
printer = lambda x: print(x)
printer("Hello Lambda")
# 运行结果：
# Hello Lambda
